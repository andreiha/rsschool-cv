!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n(1),n(2);var o=document.getElementById("refresh-button"),r=document.getElementById("refresh-button__arrows"),i=document.getElementById("language-button"),c=document.getElementById("fahrenheit-button"),a=document.getElementById("celsium-button"),u=document.querySelectorAll(".temperature-buttons"),s=document.getElementById("town-input"),d=document.getElementById("search-button"),l=document.getElementById("weather-time"),m=document.getElementById("weather-date"),h=document.getElementById("weather-location"),g=document.getElementById("temperature__now"),p=document.getElementById("icon__now-img"),f=document.getElementById("weather__summary"),y=document.getElementById("weather__apparent-temperature"),w=document.getElementById("weather__wind"),v=document.getElementById("weather__humidity"),_=document.getElementById("next-1-day__day-of-the-week"),x=document.getElementById("next-2-day__day-of-the-week"),L=document.getElementById("next-3-day__day-of-the-week"),I=document.getElementById("next-1-day__temperature"),T=document.getElementById("next-2-day__temperature"),b=document.getElementById("next-3-day__temperature"),E=document.getElementById("next-1-day__weather-icon-img"),S=document.getElementById("next-2-day__weather-icon-img"),k=document.getElementById("next-3-day__weather-icon-img"),M=document.getElementById("geolocation__map"),B=document.getElementById("geolocation"),H=document.getElementById("geolocation-coordinate__latitude"),D=document.getElementById("geolocation-coordinate__longitude"),j=document.querySelector("body"),F=document.getElementById("mistakes-overlay-tint"),O=document.getElementById("mistakes-window__text"),P=document.getElementById("mistakes-window__button"),W="en",C="celsium",q="",A="",z=void 0,J={geocoding:{},weather:{},time:{}},R={en:{daysList:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShortList:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthList:["January","February","March","April","May","June","July","August","September","October","November","December"],feelsLike:"Feels like",wind:"Wind",windSpeed:"m/s",humidity:"Humidity",latitude:"Latitude",longitude:"Longitude",mistake:"Oooops, we have the mistakes. Try to enter the correct name of the place.",buttons:{search:"SEARCH",placeholder:" Search city"}},ru:{daysList:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShortList:["Вск","Пн","Вт","Ср","Чт","Пт","Сб"],monthList:["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],feelsLike:"Ощущается",wind:"Ветер",windSpeed:"м/c",humidity:"Влажность",latitude:"Широта",longitude:"Долгота",mistake:"Ууупс, произошла ошибка. Попробуйте ввести корректное наименование населенного пункта.",buttons:{search:"ПОИСК",placeholder:" Введите город"}}};function N(e){return e<10?"0"+e:e}function U(e){return e>6?e-7:e}function G(){var e=new Date;e.setHours(e.getUTCHours()+J.time.offset);var t=e.getDay(),n=e.getDate(),o=e.getMonth(),r=e.getHours();J.time.month=o,J.time.hour=r;var i=e.getMinutes(),c=e.getSeconds();l.innerHTML=N(r)+":"+N(i)+":"+N(c),m.innerHTML=R[W].daysShortList[t]+" "+n+" "+R[W].monthList[o],_.innerHTML=R[W].daysList[U(t+1)],x.innerHTML=R[W].daysList[U(t+2)],L.innerHTML=R[W].daysList[U(t+3)],setTimeout(G,1e3)}function K(){s.placeholder=""+R[W].buttons.placeholder,d.value=""+R[W].buttons.search}function Q(e){var t=void 0;return"celsium"===J.weather.scale&&(t=1.8*e+32),"fahrenheit"===J.weather.scale&&(t=(e-32)/1.8),t}function V(){C!==J.weather.scale&&(J.weather.currentTemp=Q(J.weather.currentTemp),J.weather.currentFeelsLike=Q(J.weather.currentFeelsLike),J.weather.nextFirstDayTemp=Q(J.weather.nextFirstDayTemp),J.weather.nextSecondDayTemp=Q(J.weather.nextSecondDayTemp),J.weather.nextThirdDayTemp=Q(J.weather.nextThirdDayTemp),"celsium"===J.weather.scale?J.weather.scale="fahrenheit":J.weather.scale="celsium",""!==h.innerHTML&&te())}function X(){"fahrenheit"===C&&(c.classList.remove("transparent"),a.classList.add("transparent")),"celsium"===C&&(a.classList.remove("transparent"),c.classList.add("transparent")),localStorage.setItem("scale",C),V()}function Y(e){return fetch("https://api.opencagedata.com/geocode/v1/json?q="+e+"&key=7dd8ba7a84bd4d0fa897bf84577d8693&language="+W+"&no_annotations=1&limit=1").then((function(e){return e.json()})).then((function(e){return console.log(e),J.geocoding.city=e.results[0].components.city||e.results[0].components.town||e.results[0].components.village,J.geocoding.country=e.results[0].components.country,J.geocoding.latitude=e.results[0].geometry.lat,J.geocoding.longitude=e.results[0].geometry.lng,J}))}function Z(e){return fetch("https://api.openweathermap.org/data/2.5/onecall?lat="+e.geocoding.latitude+"&lon="+e.geocoding.longitude+"&exclude=minutely,hourly,alerts&units=metric&lang="+W+"&appid=43aa3c58f07da360c90f88e6c11cdac3").then((function(e){return e.json()})).then((function(t){return console.log(t),e.time.offset=t.timezone_offset/3600,e.weather.currentTemp=t.current.temp,e.weather.scale="celsium",e.weather.currentDescription=t.current.weather[0].description,e.weather.currentFeelsLike=t.current.feels_like,e.weather.currentWindSpeed=t.current.wind_speed,e.weather.currentHumidity=t.current.humidity,e.weather.currentIcon=t.current.weather[0].icon,e.weather.nextFirstDayTemp=t.daily[1].temp.day,e.weather.nextFirstDayIcon=t.daily[1].weather[0].icon,e.weather.nextSecondDayTemp=t.daily[2].temp.day,e.weather.nextSecondDayIcon=t.daily[2].weather[0].icon,e.weather.nextThirdDayTemp=t.daily[3].temp.day,e.weather.nextThirdDayIcon=t.daily[3].weather[0].icon,e}))}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=Math.floor(e+Math.random()*(t+1-e));return n}function ee(){return function(){switch(!0){case J.time.hour>=5&&J.time.hour<=11:q="morning";break;case J.time.hour>=18&&J.time.hour<=21:q="evening";break;case J.time.hour>21&&J.time.hour<=24||J.time.hour>=0&&J.time.hour<5:q="night";break;case J.time.hour>11&&J.time.hour<18:q="day";break;default:q=""}}(),function(){switch(J.time.month){case 11:case 0:case 1:A="winter";break;case 2:case 3:case 4:A="spring";break;case 5:case 6:case 7:A="summer";break;case 8:case 9:case 10:A="autumn";break;default:A=""}}(),console.log(q,A),fetch("https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=c5147c8dda00e6d3b6010a9f73970df1&tags=weather,nature,"+q+","+A+",-people,-women,-girl,-child,-children,-men,-religion&tag_mode=all&extras=url_h&format=json&nojsoncallback=1&per_page=100&media=photos&sort=relevance&content_type=1").then((function(e){return e.json()})).then((function(e){console.log(e);var t=$(0,e.photos.photo.length-1);if(void 0===e.photos.photo[t].url_h)do{console.log("Перезапуск без фотки"),t=$(0,e.photos.photo.length-1)}while(!e.photos.photo[t].url_h);J.image=e.photos.photo[t].url_h})).then((function(){var e=new Image;return e.src=J.image,e.onload=function(){j.style.backgroundImage="url("+J.image+")"},J}))}function te(){h.innerHTML=J.geocoding.city+", "+J.geocoding.country,g.innerHTML=Math.round(J.weather.currentTemp)+'<span id="degree-sign">&#176</span>',f.innerHTML=J.weather.currentDescription,y.innerHTML=R[W].feelsLike+": "+Math.round(J.weather.currentFeelsLike)+"&#176",w.innerHTML=R[W].wind+": "+Math.round(J.weather.currentWindSpeed)+" "+R[W].windSpeed,v.innerHTML=R[W].humidity+": "+J.weather.currentHumidity+"&#37",I.innerHTML=Math.round(J.weather.nextFirstDayTemp)+"&#176",T.innerHTML=Math.round(J.weather.nextSecondDayTemp)+"&#176",b.innerHTML=Math.round(J.weather.nextThirdDayTemp)+"&#176",H.innerHTML=R[W].latitude+": "+String(J.geocoding.latitude).split(".")[0]+"&deg"+String(J.geocoding.latitude).split(".")[1].slice(0,2)+"&#39",D.innerHTML=R[W].longitude+": "+String(J.geocoding.longitude).split(".")[0]+"&deg"+String(J.geocoding.longitude).split(".")[1].slice(0,2)+"&#39"}function ne(){p.src="icons/"+J.weather.currentIcon+".svg",E.src="icons/"+J.weather.nextFirstDayIcon+".svg",S.src="icons/"+J.weather.nextSecondDayIcon+".svg",k.src="icons/"+J.weather.nextThirdDayIcon+".svg"}function oe(){document.documentElement.clientWidth>1e3&&(B.style.height=b.getBoundingClientRect().top+"px"),M.replaceChildren();new ymaps.Map("geolocation__map",{center:[J.geocoding.latitude,J.geocoding.longitude],zoom:10,controls:["zoomControl"]});document.querySelector(".ymaps-2-1-78-copyrights-pane").remove()}function re(){!1===F.hidden?(F.hidden=!0,s.value="",O.innerHTML=""):(F.hidden=!1,O.innerHTML=""+R[W].mistake)}function ie(){new Promise((function(e){e()})).then((function(e){return""===s.value?Y(z):Y(s.value)})).then((function(e){return Z(e)})).then((function(e){return ee()})).then((function(e){return G()})).then((function(e){return V()})).then((function(e){return te()})).then((function(e){return ne()})).then((function(e){return oe()})).catch((function(){return re()}))}null===localStorage.getItem("language")?localStorage.setItem("language","en"):(W=localStorage.getItem("language"),i.value=localStorage.getItem("language")),K(),null===localStorage.getItem("scale")?localStorage.setItem("scale","celsium"):C=localStorage.getItem("scale"),X(),new Promise((function(e){e(fetch("https://ipinfo.io/json?token=72f4ef7fa30822").then((function(e){return e.json()})).then((function(e){return console.log(e),z=e.loc,J})))})).then((function(e){return Y(z)})).then((function(e){return Z(e)})).then((function(e){return ee()})).then((function(e){return G()})).then((function(e){return V()})).then((function(e){return te()})).then((function(e){return ne()})).then((function(e){return oe()})).catch((function(){return re()})),o.addEventListener("click",ee),o.addEventListener("mousedown",(function(){r.classList.add("arrows_rotation"),setTimeout((function(){return r.classList.remove("arrows_rotation")}),1e3)})),i.addEventListener("change",(function(){W=i.value,localStorage.setItem("language",W),K(),J.geocoding.city&&ie()})),s.addEventListener("keydown",(function(e){"Enter"===e.code&&ie()})),d.addEventListener("click",ie),P.addEventListener("click",re),u.forEach((function(e){return e.addEventListener("click",(function(e){C=e.target.dataset.scale,X()}))}))},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(21),n(22)},function(e,t,n){e.exports=n.p+"icons/01d.svg"},function(e,t,n){e.exports=n.p+"icons/01n.svg"},function(e,t,n){e.exports=n.p+"icons/02d.svg"},function(e,t,n){e.exports=n.p+"icons/02n.svg"},function(e,t,n){e.exports=n.p+"icons/03d.svg"},function(e,t,n){e.exports=n.p+"icons/03n.svg"},function(e,t,n){e.exports=n.p+"icons/04d.svg"},function(e,t,n){e.exports=n.p+"icons/04n.svg"},function(e,t,n){e.exports=n.p+"icons/09d.svg"},function(e,t,n){e.exports=n.p+"icons/09n.svg"},function(e,t,n){e.exports=n.p+"icons/10d.svg"},function(e,t,n){e.exports=n.p+"icons/10n.svg"},function(e,t,n){e.exports=n.p+"icons/11d.svg"},function(e,t,n){e.exports=n.p+"icons/11n.svg"},function(e,t,n){e.exports=n.p+"icons/13d.svg"},function(e,t,n){e.exports=n.p+"icons/13n.svg"},function(e,t,n){e.exports=n.p+"icons/50d.svg"},function(e,t,n){e.exports=n.p+"icons/50n.svg"},function(e,t,n){e.exports=n.p+"icons/arrows.svg"},function(e,t,n){e.exports=n.p+"icons/vector.svg"}]);